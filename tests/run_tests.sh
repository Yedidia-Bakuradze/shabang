#!/bin/bashset -eecho "=========================================="echo "   ERD Builder E2E Test Runner"echo "=========================================="# ConfigurationFRONTEND_URL="${FRONTEND_URL:-http://frontend:3000}"SELENIUM_HUB="${SELENIUM_HUB:-http://selenium-chrome:4444/wd/hub}"MAX_RETRIES=30RETRY_INTERVAL=5# Validate required files existif [ ! -f "/tests/test_erd_flows.py" ]; then    echo "ג Error: test_erd_flows.py not found!"    exit 1fiif [ ! -f "/tests/conftest.py" ]; then    echo "ג Error: conftest.py not found!"    exit 1fi# Function to wait for a service to be readywait_for_service() {    local url=$1    local service_name=$2    local retries=0        echo "ג³ Waiting for $service_name at $url..."        while [ $retries -lt $MAX_RETRIES ]; do        if curl -s --head --fail "$url" > /dev/null 2>&1; then            echo "ג… $service_name is ready!"            return 0        fi                retries=$((retries + 1))        echo "   Attempt $retries/$MAX_RETRIES - $service_name not ready, waiting ${RETRY_INTERVAL}s..."        sleep $RETRY_INTERVAL    done        echo "ג $service_name did not become ready in time"    return 1}# Wait for Selenium Hubecho ""echo "נ”§ Checking Selenium Hub..."wait_for_service "${SELENIUM_HUB}/status" "Selenium Hub"# Wait for Frontendecho ""echo "נ Checking Frontend..."wait_for_service "$FRONTEND_URL" "Frontend"# Create reports directoryecho ""echo "נ“ Setting up reports directory..."mkdir -p /tests/reports# Clean up old debug screenshots (keep only recent ones)echo "נ§¹ Cleaning up old debug screenshots..."find /tests/reports -name "debug_*.png" -type f -mtime +1 -delete 2>/dev/null || true# Run the testsecho ""echo "=========================================="echo "   Running E2E Tests"echo "=========================================="echo ""# Run pytestpytest \    --verbose \    --tb=short \    --html=/tests/reports/report.html \    --self-contained-html \    /tests/test_erd_flows.pyexit $?